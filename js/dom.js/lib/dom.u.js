/**
 * dom.js 0.0.46.5
 * Copyright (C) 2011 Daniel Rodr√≠guez (sadasant.com)
 * Licence: GNU General Public Licence
 */(function(){var a=this,b=document,c=a.dom={VERSION:"0.0.46.5"};const d=c.is=function(){var a={s:"string",n:"number",o:"object",f:"function"},b={},c=function(a,b){return typeof b==a};b.h=function(a){return a&&(a.toString().indexOf("HTML")==8||a.tagName)?!0:!1},b.a=function(a){return Array.isArray(a)};for(var d in a)b[d]=c.bind(null,a[d]);return b}(),e=c.string={trim:function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}},f=c.object={single:function(a,b){var c={};return c[a]=b,c}},g=c.array=function(){const a=Array.prototype;return{slice:function(b){return a.slice.call(b)},filter:function(b,c){return a.filter.call(b,c)},clean:function(a){return a.filter(function(a){return a})},unique:function(a){var b=[],c=a.length;if(c<2)return a;a:for(var d=0;d<c;d++){for(var e=0;e<b.length;e++)if(b[e]===a[d])continue a;b[b.length]=a[d]}return b}}}();c.att=function(){const a={"#":"id",".":"class"},b={tag:1,html:1};return function(){var e=this._args||g.slice(arguments),f=this._att,h=[].concat(this._el)||[],i=this._str_el,j=this._str_att||[],k=this._index,l,m=0;while(l=e[m++])d.s(l)?j[j.length]=l:d.a(l)?e=e.concat(l):d.h(l)?h[h.length]=l:d.o(l)&&(f=l);j.length==2&&(f||(f={}),f[j[0]]=j[1]);if(h){h=g.clean(h);if(h.length<2)h=h[0];else if(h.length>1)return h.map(function(a){return c.att.apply({_el:a,_args:[f],_str_att:j})})}if(f){for(var n in f){var o=f[n];if(!o||!~o.indexOf(":"))continue;o=o.split(":"),o[1]=="i"?f[n]=o[0]+k:o[1]=="h"?f[n]=o[0]+f.html:f[o[1]]&&(f[n]=o[0]+f[o[1]])}if(h)for(var n in f){var o=f[n];if(!o)continue;b[n]?n=="html"&&(h.innerHTML=o):h.setAttribute(n,o)}return h}if(h){var f={},p=h.attributes;for(var n in p)f[p[n].name]=p[n].textContent;return f.html=h.innerHTML,j.length&&(f=f[j[0]]),f}if(i){var q;h=i;for(var m=0;m<h.length;m++)if(q=a[h[m]]){h=h.split(h[m]),f||(f={}),f[q]=h[1],m&&h[0]&&(f.tag=h[0]);break}if(!f)return{tag:h};for(var n in f){var r=c.att.apply({_str_el:f[n]});for(var s in r)f[s=="tag"?n:s]=r[s]}return f}}}(),c.get=function(){var c={active:function(){return b.activeElement},selection:function(){return a.getSelection?a.getSelection():b.getSelection?b.getSelection:b.selection.createRange().text},position:function(){var a=0,b=0,c=this._el;while(c&&!isNaN(c.offsetLeft)&&!isNaN(c.offsetTop))a+=c.offsetLeft-c.scrollLeft,b+=c.offsetTop-c.scrollTop,c=c.offsetParent;return{x:a,y:b}}},e=[];for(var f in c)e[e.length]=f;return function(){var a=this._args||g.slice(arguments),f=this._doc||b,h=[],i,j,k,l=0;while(k=a[l++])if(d.n(k))i=k;else if(d.s(k)){if(~e.indexOf(k))return c[k].apply({_el:f});d.a(f)||(f=[f]);for(var m=0;m<f.length;m++){var n=g.slice(f[m].querySelectorAll(k));h=h.concat(n)}}else if(d.a(k))a=a.concat(k);else if(d.h(k))h[h.length]=k;else if(d.f(k))j=k;else if(d.o(k)){var n,o;k.id&&(n=b.getElementById(k.id)),k.class&&(n?~n.className.indexOf(k.class)||(n=o):n=g.slice(b.getElementsByClassName(k.class)));if(k.tag&&(k.tag=k.tag.toUpperCase()))if(!n)n=g.slice(b.getElementsByTagName(k.tag));else{d.a(n)||(n=[n]);for(var l=0;l<n.length;l++)n[l].tagName!==k.tag&&(n[l]=o);n=g.clean(n)}if(k.x&&k.y){var p=b.elementFromPoint?b.elementFromPoint(k.x,k.y):b.getElementFromPoint(k.x,k.y);n&&p!==n?n=o:n=p}return j?j(n):n}return h=h.length<2?h[0]:g.unique(h),i&&(h=h.slice(0,i)),j?j(h):h}}(),c.add=function(){var a=this._args||g.slice(arguments),e=[].concat(this._dad||b.body||b.firstChild),f=[],h,i,j=0;while(i=a[j++])d.s(i)?i.split("\n").forEach(function(a,d,e){f[f.length]=b.createTextNode(a),d<e.length-1&&(f[f.length]=c.new("br"))}):d.a(i)?a=a.concat(i):d.h(i)&&(f[f.length]=i),d.f(i)&&(h=i);for(var j=0;j<e.length;j++)for(var k=0;k<f.length;k++)e[j].appendChild(j?f[k].cloneNode(!0):f[k]);return h?h(!0):!0},c.dig=function(){function j(a){f||(_o=a.cloneNode(!0),h[h.length]=_o),a.parentNode.removeChild(a)}var a=this._args||g.slice(arguments),e=this._doc||b,f=this._dont_clone,h=[],i,k,l=0;while(k=a[l++])d.s(k)?[].concat(c.get(k)).map(j):d.a(k)?a=a.concat(k):d.h(k)?j(k):d.f(k)&&(i=k);return h.length<2&&(h=h[0]),i?i(h):h},c.rm=c.dig.bind({_dont_clone:!0}),c.new=function(){var a=this._args||g.slice(arguments),f=this._doc||b,h=[],i,j={},k=0,l,m;i=a.splice(0,1)[0],d.s(i)&&(i=i.split(",").map(function(a){return e.trim(a)}));if(d.h(i)&&!a.length)return i;i=i[0],j=c.att.apply({_str_el:i}),j.tag&&(i=j.tag);var n,k=0;while(n=a[k++])if(d.a(n))for(var o=0;o<n.length;o++)d.h(n[o])?h[h.length]=c.in(n[o]).att():h[h.length]=n[o];else if(d.s(n))!j.html&&(j.html=n);else if(d.n(n))l=n;else if(d.h(n))h[h.length]=n;else if(d.o(n))for(var p in n)j[p]=n[p];else d.f(n)&&(m=n);return h&&h.length?h.map(function(a,b){return c.new(i,j,a,b)}):(i=f.createElement(i),i=c.att.apply({_el:i,_index:l},[j]),m?m(i):i)},c.in=function(a){return!d.h(a)&&(a=a?c.get(a):b),{att:c.att.bind({_el:a}),get:c.get.bind({_doc:a}),add:c.add.bind({_dad:a}),"new":function(){var b=c.new.call({_args:g.slice(arguments)});return c.in(a).add(b),b},out:function(){return a}}}})();